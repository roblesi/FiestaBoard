{
  "id": "nearby_aircraft",
  "name": "Nearby Aircraft",
  "version": "1.0.0",
  "description": "Display real-time nearby aircraft information from OpenSky Network API",
  "author": "FiestaBoard Team",
  "repository": "https://github.com/FiestaBoard/FiestaBoard",
  "documentation": "README.md",
  "icon": "plane",
  "category": "data",

  "settings_schema": {
    "type": "object",
    "properties": {
      "enabled": {
        "type": "boolean",
        "title": "Enable Nearby Aircraft",
        "default": false
      },
      "latitude": {
        "type": "number",
        "title": "Latitude",
        "description": "Center latitude for aircraft detection (-90 to 90)",
        "minimum": -90,
        "maximum": 90
      },
      "longitude": {
        "type": "number",
        "title": "Longitude",
        "description": "Center longitude for aircraft detection (-180 to 180)",
        "minimum": -180,
        "maximum": 180
      },
      "radius_km": {
        "type": "number",
        "title": "Radius (km)",
        "description": "Search radius in kilometers",
        "default": 50,
        "minimum": 1
      },
      "client_id": {
        "type": "string",
        "title": "OpenSky Client ID (Optional)",
        "description": "Client ID for authenticated API access. Get from opensky-network.org"
      },
      "client_secret": {
        "type": "string",
        "title": "OpenSky Client Secret (Optional)",
        "description": "Client secret for authenticated API access",
        "ui:widget": "password"
      },
      "max_aircraft": {
        "type": "integer",
        "title": "Max Aircraft",
        "description": "Maximum number of aircraft to display (1-10)",
        "default": 4,
        "minimum": 1,
        "maximum": 10
      },
      "refresh_seconds": {
        "type": "integer",
        "title": "Refresh Interval (seconds)",
        "description": "How often to fetch new data (minimum 10 seconds)",
        "default": 120,
        "minimum": 10
      }
    },
    "required": ["latitude", "longitude"]
  },

  "env_vars": [
    {
      "name": "NEARBY_AIRCRAFT_ENABLED",
      "required": false,
      "description": "Enable nearby aircraft feature",
      "default": "false"
    },
    {
      "name": "NEARBY_AIRCRAFT_LATITUDE",
      "required": false,
      "description": "Center latitude (-90 to 90)"
    },
    {
      "name": "NEARBY_AIRCRAFT_LONGITUDE",
      "required": false,
      "description": "Center longitude (-180 to 180)"
    },
    {
      "name": "NEARBY_AIRCRAFT_RADIUS_KM",
      "required": false,
      "description": "Search radius in kilometers (default: 50)",
      "default": "50"
    },
    {
      "name": "OPENSKY_CLIENT_ID",
      "required": false,
      "description": "OpenSky Network OAuth2 client ID"
    },
    {
      "name": "OPENSKY_CLIENT_SECRET",
      "required": false,
      "description": "OpenSky Network OAuth2 client secret"
    },
    {
      "name": "NEARBY_AIRCRAFT_MAX_COUNT",
      "required": false,
      "description": "Maximum aircraft to display (default: 4)",
      "default": "4"
    },
    {
      "name": "NEARBY_AIRCRAFT_REFRESH_SECONDS",
      "required": false,
      "description": "Refresh interval in seconds (default: 120)",
      "default": "120"
    }
  ],

  "variables": {
    "simple": [
      "call_sign",
      "altitude",
      "ground_speed",
      "squawk",
      "formatted",
      "headers",
      "aircraft_count",
      "last_updated"
    ],
    "arrays": {
      "aircraft": {
        "label_field": "call_sign",
        "item_fields": [
          "icao24",
          "call_sign",
          "altitude",
          "ground_speed",
          "squawk",
          "latitude",
          "longitude",
          "distance_km",
          "formatted"
        ]
      }
    }
  },

  "max_lengths": {
    "call_sign": 8,
    "altitude": 6,
    "ground_speed": 4,
    "squawk": 4,
    "formatted": 22,
    "headers": 22,
    "aircraft_count": 1,
    "last_updated": 25,
    "aircraft.*.icao24": 6,
    "aircraft.*.call_sign": 8,
    "aircraft.*.altitude": 6,
    "aircraft.*.ground_speed": 4,
    "aircraft.*.squawk": 4,
    "aircraft.*.formatted": 22,
    "aircraft.*.distance_km": 6
  }
}
