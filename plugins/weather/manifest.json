{
  "id": "weather",
  "name": "Weather",
  "version": "1.0.0",
  "description": "Display current weather conditions with temperature, humidity, and wind speed",
  "author": "FiestaBoard Team",
  "repository": "https://github.com/FiestaBoard/FiestaBoard",
  "documentation": "README.md",
  "icon": "cloud-sun",
  "category": "weather",

  "settings_schema": {
    "type": "object",
    "properties": {
      "enabled": {
        "type": "boolean",
        "title": "Enable Weather",
        "default": false
      },
      "provider": {
        "type": "string",
        "title": "Weather Provider",
        "description": "Choose your weather data provider",
        "enum": ["weatherapi", "openweathermap"],
        "default": "weatherapi"
      },
      "api_key": {
        "type": "string",
        "title": "API Key",
        "description": "Your weather provider API key",
        "ui:widget": "password"
      },
      "locations": {
        "type": "array",
        "title": "Locations",
        "description": "Weather locations to monitor (max 4)",
        "minItems": 1,
        "maxItems": 4,
        "items": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "title": "Location",
              "description": "City name, zip code, or coordinates"
            },
            "name": {
              "type": "string",
              "title": "Display Name",
              "description": "Short name for display (e.g., HOME, WORK)",
              "maxLength": 10
            }
          },
          "required": ["location", "name"]
        }
      },
      "refresh_seconds": {
        "type": "integer",
        "title": "Refresh Interval (seconds)",
        "description": "How often to fetch new weather data",
        "default": 300,
        "minimum": 60,
        "maximum": 3600
      }
    },
    "required": ["api_key", "locations"]
  },

  "env_vars": [
    {
      "name": "WEATHER_API_KEY",
      "required": true,
      "description": "API key from WeatherAPI or OpenWeatherMap"
    },
    {
      "name": "WEATHER_PROVIDER",
      "required": false,
      "description": "Weather provider: weatherapi (default) or openweathermap",
      "default": "weatherapi"
    },
    {
      "name": "WEATHER_LOCATION",
      "required": false,
      "description": "Default location (city name, zip, or coordinates)"
    },
    {
      "name": "WEATHER_REFRESH_SECONDS",
      "required": false,
      "description": "Refresh interval in seconds",
      "default": "300"
    }
  ],

  "variables": {
    "simple": [
      "temperature",
      "temperature_c",
      "feels_like",
      "feels_like_c",
      "condition",
      "humidity",
      "wind_speed",
      "location",
      "location_name",
      "location_count",
      "temperature_color",
      "uv_index_color",
      "precipitation_chance",
      "high_temp",
      "high_temp_c",
      "low_temp",
      "low_temp_c",
      "uv_index",
      "sunset"
    ],
    "arrays": {
      "locations": {
        "label_field": "location_name",
        "item_fields": [
          "temperature",
          "temperature_c",
          "feels_like",
          "feels_like_c",
          "condition",
          "humidity",
          "wind_speed",
          "location",
          "location_name",
          "precipitation_chance",
          "high_temp",
          "high_temp_c",
          "low_temp",
          "low_temp_c",
          "uv_index",
          "sunset"
        ]
      }
    }
  },

  "max_lengths": {
    "temperature": 3,
    "temperature_c": 3,
    "feels_like": 3,
    "feels_like_c": 3,
    "condition": 12,
    "humidity": 3,
    "wind_speed": 3,
    "location": 15,
    "location_name": 10,
    "location_count": 1,
    "temperature_color": 4,
    "uv_index_color": 4,
    "precipitation_chance": 3,
    "high_temp": 3,
    "high_temp_c": 3,
    "low_temp": 3,
    "low_temp_c": 3,
    "uv_index": 2,
    "sunset": 8,
    "locations.*.temperature": 3,
    "locations.*.temperature_c": 3,
    "locations.*.feels_like": 3,
    "locations.*.feels_like_c": 3,
    "locations.*.condition": 12,
    "locations.*.humidity": 3,
    "locations.*.wind_speed": 3,
    "locations.*.location": 15,
    "locations.*.location_name": 10,
    "locations.*.precipitation_chance": 3,
    "locations.*.high_temp": 3,
    "locations.*.high_temp_c": 3,
    "locations.*.low_temp": 3,
    "locations.*.low_temp_c": 3,
    "locations.*.uv_index": 2,
    "locations.*.sunset": 8
  },

  "color_rules_schema": {
    "temperature": {
      "type": "threshold",
      "description": "Color based on temperature value",
      "default_rules": [
        {"condition": ">=", "value": 90, "color": "red"},
        {"condition": ">=", "value": 75, "color": "orange"},
        {"condition": ">=", "value": 60, "color": "green"},
        {"condition": ">=", "value": 45, "color": "blue"},
        {"condition": "<", "value": 45, "color": "violet"}
      ]
    },
    "uv_index": {
      "type": "threshold",
      "description": "Color based on UV index value (standard UV index color scheme)",
      "default_rules": [
        {"condition": ">=", "value": 11, "color": "violet"},
        {"condition": ">=", "value": 8, "color": "red"},
        {"condition": ">=", "value": 6, "color": "orange"},
        {"condition": ">=", "value": 3, "color": "yellow"},
        {"condition": "<", "value": 3, "color": "green"}
      ]
    }
  }
}

