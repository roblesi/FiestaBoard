{
  "id": "air_fog",
  "name": "Air Quality & Fog",
  "version": "1.0.0",
  "description": "Display air quality (AQI) and fog/visibility conditions",
  "author": "FiestaBoard Team",
  "repository": "https://github.com/FiestaBoard/FiestaBoard",
  "documentation": "README.md",
  "icon": "wind",
  "category": "weather",

  "settings_schema": {
    "type": "object",
    "properties": {
      "enabled": {
        "type": "boolean",
        "title": "Enable Air Quality & Fog",
        "default": false
      },
      "purpleair_api_key": {
        "type": "string",
        "title": "PurpleAir API Key",
        "description": "API key for air quality data",
        "ui:widget": "password"
      },
      "openweathermap_api_key": {
        "type": "string",
        "title": "OpenWeatherMap API Key",
        "description": "API key for visibility/fog data",
        "ui:widget": "password"
      },
      "purpleair_sensor_id": {
        "type": "string",
        "title": "PurpleAir Sensor ID",
        "description": "Optional: Specific sensor ID (otherwise uses nearby sensors)"
      },
      "latitude": {
        "type": "number",
        "title": "Latitude",
        "description": "Location latitude",
        "default": 37.7749
      },
      "longitude": {
        "type": "number",
        "title": "Longitude",
        "description": "Location longitude",
        "default": -122.4194
      },
      "refresh_seconds": {
        "type": "integer",
        "title": "Refresh Interval (seconds)",
        "default": 300,
        "minimum": 60
      }
    }
  },

  "env_vars": [
    {
      "name": "PURPLEAIR_API_KEY",
      "required": false,
      "description": "PurpleAir API key for air quality"
    },
    {
      "name": "OPENWEATHERMAP_API_KEY",
      "required": false,
      "description": "OpenWeatherMap API key for visibility"
    },
    {
      "name": "PURPLEAIR_SENSOR_ID",
      "required": false,
      "description": "Optional specific PurpleAir sensor ID"
    },
    {
      "name": "AIR_FOG_LATITUDE",
      "required": false,
      "description": "Location latitude",
      "default": "37.7749"
    },
    {
      "name": "AIR_FOG_LONGITUDE",
      "required": false,
      "description": "Location longitude",
      "default": "-122.4194"
    }
  ],

  "variables": {
    "simple": [
      "aqi",
      "air_status",
      "air_color",
      "fog_status",
      "fog_color",
      "is_foggy",
      "visibility",
      "formatted"
    ]
  },

  "max_lengths": {
    "aqi": 3,
    "air_status": 18,
    "air_color": 4,
    "fog_status": 10,
    "fog_color": 4,
    "is_foggy": 3,
    "visibility": 5,
    "formatted": 22
  },

  "color_rules_schema": {
    "aqi": {
      "type": "threshold",
      "description": "Color based on AQI level",
      "default_rules": [
        {"condition": ">", "value": 300, "color": "violet"},
        {"condition": ">", "value": 200, "color": "violet"},
        {"condition": ">", "value": 150, "color": "red"},
        {"condition": ">", "value": 100, "color": "orange"},
        {"condition": ">", "value": 50, "color": "yellow"},
        {"condition": "<=", "value": 50, "color": "green"}
      ]
    }
  }
}

