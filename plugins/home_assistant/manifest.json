{
  "id": "home_assistant",
  "name": "Home Assistant",
  "version": "1.0.0",
  "description": "Display entity states from Home Assistant",
  "author": "FiestaBoard Team",
  "repository": "https://github.com/FiestaBoard/FiestaBoard",
  "documentation": "README.md",
  "icon": "home",
  "category": "home",

  "settings_schema": {
    "type": "object",
    "properties": {
      "enabled": {
        "type": "boolean",
        "title": "Enable Home Assistant",
        "default": false
      },
      "base_url": {
        "type": "string",
        "title": "Home Assistant URL",
        "description": "Base URL (e.g., http://192.168.1.100:8123)",
        "format": "uri"
      },
      "access_token": {
        "type": "string",
        "title": "Long-Lived Access Token",
        "description": "Create in HA: Profile â†’ Long-Lived Access Tokens",
        "ui:widget": "password"
      },
      "entities": {
        "type": "array",
        "title": "Entities to Monitor",
        "description": "Home Assistant entities to display",
        "items": {
          "type": "object",
          "properties": {
            "entity_id": {
              "type": "string",
              "title": "Entity ID",
              "description": "e.g., sensor.temperature, binary_sensor.door"
            },
            "name": {
              "type": "string",
              "title": "Display Name",
              "description": "Short name for display",
              "maxLength": 12
            }
          },
          "required": ["entity_id", "name"]
        }
      },
      "timeout": {
        "type": "integer",
        "title": "Timeout (seconds)",
        "default": 5,
        "minimum": 1,
        "maximum": 30
      },
      "refresh_seconds": {
        "type": "integer",
        "title": "Refresh Interval (seconds)",
        "default": 30,
        "minimum": 10
      }
    },
    "required": ["base_url", "access_token"]
  },

  "env_vars": [
    {
      "name": "HOME_ASSISTANT_BASE_URL",
      "required": true,
      "description": "Home Assistant base URL"
    },
    {
      "name": "HOME_ASSISTANT_ACCESS_TOKEN",
      "required": true,
      "description": "Long-lived access token"
    },
    {
      "name": "HOME_ASSISTANT_TIMEOUT",
      "required": false,
      "description": "Request timeout in seconds",
      "default": "5"
    }
  ],

  "variables": {
    "simple": [
      "connected",
      "entity_count"
    ],
    "dynamic_entities": {
      "description": "Access any Home Assistant entity dynamically",
      "access_pattern": "home_assistant.{entity_id}.state",
      "examples": [
        "home_assistant.sensor.temperature.state",
        "home_assistant.binary_sensor.door.state",
        "home_assistant.light.kitchen.state"
      ]
    }
  },

  "max_lengths": {
    "connected": 3,
    "entity_count": 3
  },

  "color_rules_schema": {
    "state": {
      "type": "match",
      "description": "Color based on entity state",
      "default_rules": [
        {"condition": "==", "value": "on", "color": "green"},
        {"condition": "==", "value": "off", "color": "red"},
        {"condition": "==", "value": "open", "color": "orange"},
        {"condition": "==", "value": "closed", "color": "green"},
        {"condition": "==", "value": "unavailable", "color": "red"}
      ]
    }
  }
}

