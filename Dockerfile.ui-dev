# Development Dockerfile for UI with nginx pre-installed
# This avoids reinstalling nginx and npm packages on every container start
FROM node:20-alpine

# Install nginx at build time (not runtime)
RUN apk add --no-cache nginx

# Create nginx directories with correct permissions
RUN mkdir -p /var/log/nginx /var/lib/nginx/tmp /run/nginx

# Set working directory
WORKDIR /app

# Install a minimal set of global tools if needed
# (project dependencies will be installed via volume-mounted node_modules)

# Expose ports
EXPOSE 3000 3001

# The actual startup will be handled by start-dev-ui.sh
# but now it won't need to install nginx

